<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <title>Student To Do</title> 
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
</head>
<body>
    <h1>Student To Do App- Del 1</h1>

    {% if varslinger %}
    <div class="varsling-boks">
        <h3>游댒 varslinger:</h3>
        <ul>
            {% for oppgave in varslinger %}
                <li class="varsling">{{ oppgave.tittel }} - {{oppgave.frist}}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}



    <h2>Legg til ny oppgave</h2>
    <h3>Sortert etter frist(n칝rmest dato, f칮rst)</h3>

    <form method="POST">
        <label for ="tittel">Tittel:</label>
        <input type="text" id="tittel" name="tittel" required>
        <label for="frist">Frist:</label>
        <input type="date" id="frist" name="frist" required>
        <button type="submit">Legg til</button>
    </form>
    <h2>Dine Oppgaver</h2> 
    <ul>
        {% for oppgave in oppgaver %}
        <li>
            <span class="{{ 'ferdig' if oppgave.ferdig else 'uferdig' }}">
            {{ oppgave.tittel }} - {{ oppgave.frist }}
            </span>
            <a href="{{ url_for('status', index=loop.index0) }}">Bytt status</a>
            <a href="{{ url_for('fjern', index=loop.index0) }}">Fjern</a>
        </li>
        {% else %}
        <li>Ingen Oppgaver Enda</li>
        {% endfor %}
    </ul>

    <section class="calendar">
        <h2> Kalender- neste 7 dager</h2>
        <div class="week-grid">
            {% for dato,oppgaver_p친_dato in kalender %}
                <div class="day-card">
                    <div class="day-header">
                        <span class="day-date">{{ dato }}</span>
                        <span class="day-count">{{ oppgaver_p친_dato|length }}</span>
                    </div>
                    <div class="day-body">
                        {% if oppgaver_p친_dato %}
                            <ul class="mini-list">
                                {% for o in oppgaver_p친_dato %}
                                    <li>
                                        <details class="calendar-item {{ 'ferdig' if o.ferdig else 'uferdig' }}">
                                            <summary>{{o.tittel}}</summary>
                                            <div class="cal-detail">
                                                <p>Frist: {{ o.frist }}</p>
                                                <p>Status: {{ "Ferdig" if o.ferdig else "Uferdig" }}</p>
                                                <p>
                                                    <a href="{{url_for('status', index=o.__global_index)}}">Bytt status</a>

                                                    <a href="{{url_for('fjern', index=o.__global_index)}}>Fjern</a>
                                                </p>
                                            </div>
                                        </details>
                                    </li>
                                    {% endfor %}
                            </ul>
                            {% else %}
                    <div class="no-tasks">Ingen oppgaver</div>
                    {% endif %}
                    </div>
                </div>
                {% endfor %}
        </div>
    </select>
    
</body>
</html>